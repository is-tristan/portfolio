---
import { Image } from "astro:assets"
import XDecoration from "./x-decoration.astro"
// @ts-ignore
import data from "../data/portfolio.json"
const extLinkIcon =
	'<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor"><path d="M640-624 284-268q-11 11-28 11t-28-11q-11-11-11-28t11-28l356-356H280q-17 0-28.5-11.5T240-720q0-17 11.5-28.5T280-760h400q17 0 28.5 11.5T720-720v400q0 17-11.5 28.5T680-280q-17 0-28.5-11.5T640-320v-304Z"/></svg>'
const githubIcon =
	'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>'
const categories = ["All", "Next.js", "Typescript", "Supabase", "Astro", "Vite", "WordPress", "Headless"]
---

<section id="portfolio" class="row portfolio hasBorders">
	<div class="container portfolioContainer">
		<XDecoration />
		<div class="heading">
			<h2>Portfolio</h2>
		</div>
		<nav class="categoriesNav" arial-label="Portfolio categories">
			{categories.map((category: string) => <button class="btn transparent category">{category}</button>)}
		</nav>
		<div class="portfolioItems">
			{
				data.map(
					(item: {
						title: string | null
						feautedImage: string | null
						stack: string[] | null
						link: string | null
						repo: string | null
					}) => (
						<article class="portfolioItem">
							{(item.feautedImage && item.link) && (
								<a href={item.link} target="_blank" class="itemImage">
									<Image
										src={item.feautedImage}
										alt={item.title}
										width={400}
										height={225}
										sizes="(max-width: 768px) 100vw, 50vw"
										layout="full-width"
										loading="lazy"
										quality={80}
									/>
								</a>
							)}
							{item.title && item.stack?.length && (
									
									<div class="stack">
										{item.stack.map((stack: string) => (
											<span class="stackItem" data-category={stack.toLowerCase().replace(/ /g, "-").replace(".", "")}>
												{stack}
											</span>
										))}
									</div>
									<h3>{item.title}</h3>
							)}
							<div class="buttons">
								{item.link && (
									<a href={item.link} target="_blank" class="btn">
										<span>View</span>
										<div class="icon" set:html={extLinkIcon} />
									</a>
								)}
								{item.repo && (
									<a href={item.repo} target="_blank" class="btn transparent">
										<div class="icon" set:html={githubIcon} />
										<span>GitHub</span>
									</a>
								)}
							</div>
						</article>
					)
				)
			}
		</div>
	</div>
</section>
